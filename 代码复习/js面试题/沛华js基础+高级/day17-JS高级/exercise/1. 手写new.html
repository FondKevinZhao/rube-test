<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /* 
            new 到底做了什么？
                1. 返回了一个对象
                2. 让这个对象的隐式原型指向构造函数的显示原型
                3. 构造函数的this指向实例化对象(this指向实例化对象)
                4. 判断构造函数的返回值是什么类型(判断返回值类型)
         */

         function Student(name, age, sex) {
             this.name = name;
             this.age = age;
             this.sex = sex;

             return null;
             // 函数可能有返回值也可能没有返回值，当这个函数的返回值为基本类型值的时候，实例化对象返回的还是一个对象，如果这个函数的返回值是对象类型，那么实例化对象返回的就是当前这个函数的返回值。
         }

         function myNew(constr) {
             // 1. 创建一个对象
             var obj = {};
             // 2. 让这个对象的隐式原型指向构造函数的显式原型
             obj.__proto__ = constr.prototype;

             // 3. 获取给构造函数传递的参数 通过arguments来拿
             var argArr = Array.from(arguments).slice(1);
             // 4. 调用构造函数，并把他的this指向实例化对象obj
             var re = constr.apply(obj, argArr);
             // 5. 判断re是对象类型还是基本类型
             if (typeof re === 'object' && re !== null || typeof re === 'function') {
                 return re;
             }
             // 6. 返回了一个对象
             return obj;
         }
         var s2 = myNew(Student, 'laowang', 17, 'nan');
         console.log(s2);
    </script>
</body>
</html>