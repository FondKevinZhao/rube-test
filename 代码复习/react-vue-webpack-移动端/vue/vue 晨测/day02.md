# day02

## 谈谈事件（回调函数写法？修饰符？）

## 谈谈生命周期函数

## 输入 url 到页面最终渲染完成，中间发生了什么

1. DNS 查询/解析

- 作用：将域名地址解析为 ip 地址
- 过程：
  - 读取 4 个缓存
    - 浏览器 DNS 缓存
    - 计算机 DNS 缓存
    - 路由器 DNS 缓存
    - 网络运营商 DNS 缓存
  - 1 个递归查询
    - 13 个根域名服务器

2. TCP 连接：TCP 三次握手

- 第一次握手：客户端发起，我将要发送请求了，你准备一下
- 第二次握手：服务端发起，我知道了，准备好了，放马过来
- 第三次握手：客户端发起，我也知道了，等着

- 为什么要三次握手？
  - 目的：确保客户端和服务端收、发能力都是正常的
  - 第一次握手：服务端知道客户端发送能力是正常的
  - 第二次握手：客户端知道服务端发送和接受能力是正常的
  - 第三次握手：服务端知道客户端接受能力是正常的

3. 发送请求

- 客户端发送请求给服务器
- 请求报文

  - 请求首行
    - 请求地址
    - 请求方式
    - 查询字符串参数
  - 请求头
    - 携带 cookie（cookie）
    - 携带 token（authorization）
  - 空行
  - 请求主体
    - 请求体参数(POST)

4. 接收响应

- 服务端返回响应给客户端
- 响应报文

  - 响应首行
    - 响应状态码
      - 1xx
      - 2xx
      - 3xx
      - 4xx
      - 5xx
  - 响应头
    - set-cookie 设置 cookie
    - 缓存 cache-control
  - 空行
  - 响应主体
    - 响应数据

5. 渲染页面

- 最开始返回 index.html 页面，浏览器解析 html 文件
- 遇到 DOM 标记，调用 HTML 解析器，将元素解析 DOM 树
- 遇到 css 标记，调用 css 解析器，解析成 CSSOM 树
  - style 不阻塞
  - link 阻塞（防止闪屏）
- 遇到 js 标记（script 阻塞），调用 js 引擎，解析 js 代码
  - 可能会操作 DOM，重新调用 HTML 解析器，将元素解析 DOM 树
  - 可能会操作 CSS，重新调用 css 解析器，解析成 CSSOM 树
  - 这个过程就会导致页面重排重绘
- 将 DOM 树和 CSSOM 树组合生成 render 树
- 布局 layout
- 渲染 render

6. TCP 断开连接：TCP 四次挥手

- 断开 TCP 连接需要 4 次：客户端发送请求断开两次，服务端返回响应断开两次
- 第一次挥手：客户端发起，客户端数据发送完毕了，准备断开了
- 第二次挥手：服务端发起，服务端数据接收完毕了，可以断开了
- 第三次挥手：服务端发起，服务端数据发送完毕了，准备断开了
- 第四次挥手:   客户端发起，客户端数据接收完毕了，可以断开了

