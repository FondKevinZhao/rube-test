### 项目中遇到的难点

#### 后台管理系统

1. 属性模块，在点击某个商品的属性去添加新的属性的时候，发现重名。看了很久代码没有弄明白，后面弄明白了，在判断的时候，把自身算进去了，所以判断一直为真，提示已有此属性，不能重复输入。

   **解决：**在循环整个属性列表的时候，排除当前的自身的位置，就解决了这个问题。

2. 在删除属性值的时候：给删除按钮做气泡框，用 el-popconfirm 组件绑定 onConfirm 事件(用于响应用户的确认删除操作)的时候(用的官网的confirm事件)一直没有效果，一直以为是我代码写得有问题，检查了很久没有发现。

   **解决：**后面在网上查资料，才发现需要把 confirm 改成 onConfirm 事件才行。

#### 商城

1. vue-router 升级到 3.1.x 后，重复点击导航时，控制台出现报错 ，虽然不影响功能使用，但也不能视而不见。

   报错原因：vue router ≥ v3.1 后 ，回调形式改成 promise api 了，返回的是 promise，如果没有捕获到错误，控制台始终会出现如上图的警告。

   解决方法：

   1. 降低版本`npm i vue-router@3.0 -S`

   2. 在 router 文件夹增加下列代码

      ```js
      const routerPush = Router.prototype.push
      Router.prototype.push = function push(location) {
        return routerPush.call(this, location).catch((error) => error)
      }
      ```

      

   3. 捕获异常：

      ```js
      // 捕获router.push异常
      this.$router.push(route).catch((err) => {
        console.log('输出报错', err)
      })
      ```

      

   4. 补齐 router 第三个参数

      ```js
      // 补齐router.push()的第三个参数
      this.$router.push(
        route,
        () => {},
        (e) => {
          console.log('输出报错', e)
        }
      )
      ```

      [博客链接](https://juejin.cn/post/6878216531730235399)

2. 

#### 小程序

