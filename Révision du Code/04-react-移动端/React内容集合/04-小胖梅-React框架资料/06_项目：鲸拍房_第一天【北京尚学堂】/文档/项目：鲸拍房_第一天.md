![logo](images\logo.png)

# 项目：鲸拍房_第一天

**主要内容**

* Ant Design库
* 路由配置
* less配置
* 导航菜单
* 首页搜索区域

**学习目标**

 知识点| 要求 
 -| :- 
 Ant Design库 | 掌握 
 路由配置 | 掌握 
 less配置 | 掌握 
 导航菜单 | 掌握 
 首页搜索区域 | 掌握 



## 一、Ant Design库

### 1.1 Ant Design库介绍

`antd` 是基于 Ant Design 设计体系的 React UI 组件库，主要用于研发企业级中后台产品。

​	![logo](images\and.png)



✨ 特性

- 🌈 提炼自企业级中后台产品的交互语言和视觉风格。
- 📦 开箱即用的高质量 React 组件。
- 🛡 使用 TypeScript 开发，提供完整的类型定义文件。
- ⚙️ 全链路开发和设计工具体系。
- 🌍 数十个国际化语言支持。
- 🎨 深入每个细节的主题定制能力。



### 1.2 安装

使用 npm 或 yarn 安装

**我们推荐使用 npm 或 yarn 的方式进行开发**，不仅可在开发环境轻松调试，也可放心地在生产环境打包部署使用，享受整个生态圈和工具链带来的诸多好处。

```bash
$ npm install antd --save
$ yarn add antd
```

如果你的网络环境不佳，推荐使用 [cnpm]。

引入样式

```js
import 'antd/dist/antd.css'; // or 'antd/dist/antd.less'
```



### 1.3 Ant Design库加载样式

1. 全局引入

2. import 'antd/dist/antd.css'

​     优点：导入了所有的组件的样式 使用组件的时候不用考虑样式

​     缺点：导入无用的组件的css样式 



  3. 按需引入

​     1. 安装配置：babel-plugin-import (推荐) 

​      gitHub：https://github.com/ant-design/babel-plugin-import

​     2. npm run eject 暴露webpack.config.js 

​     3. npm install babel-plugin-import --save-dev

​     4. 配置一个根目录文件  (注：暴露了webpack后需要删除package.json文件里面的babel配置)

```.babelrc
{
    "presets": [
       "react-app"
       ],
    "plugins": [["import", {
        "libraryName": "antd",
        "style": "css"
    }]]
}
```

### 1.4 基本使用

​	![logo](images\antd.png)

代码演示

```jsx
import { Button } from 'antd';

ReactDOM.render(
  <>
    <Button type="primary">Primary Button</Button>
    <Button>Default Button</Button>
    <Button type="dashed">Dashed Button</Button>
    <br />
    <Button type="text">Text Button</Button>
    <Button type="link">Link Button</Button>
  </>,
  mountNode,
);
```




## 二、路由配置

### 2.1 效果图

​	![logo](images\01.png)



### 2.2 路由配置代码

```js
//导入路由配置模块
import { HashRouter as Router, Route, Switch, Redirect, Link } from 'react-router-dom'
//导入组件
import Layout from './pages/Layout/Layout'
import Login from './pages/Login/Login'
import Home from './pages/Home/Home'
import News from './pages/News/News'
import House from './pages/House/House'
function App() {
  return (
    <Router>
      <Switch>
        {/* 登录界面 */}
        <Route path='/login' component={Login} />
        
        {/* 布局界面 */}
        <Layout path='/'>
          <Switch>
            <Route exact path='/' component={Home} />
            <Route path='/house' component={House} />
            <Route path='/news' component={News} />
          </Switch>
        </Layout>

      </Switch>
    </Router>
  );
}

export default App;
```

## 三、less配置

### 3.1 安装less

​	React 脚手架里面已经配置了 Sass，只需要安装 Sass即可；但是，并没有配置 Less，这需要我们去配置 webpack.config.js

1. npm i less less-loader -S
2. npm run eject
3. 配置修改webpack.config.js  复制一份sass修改less



### 3.2 修改配置文件

然而你会发现使用脚手架创建的项目中并找不到这个文件，原因就是你需要暴露它才能看到它：

```bash
npm run eject
```

​	![logo](images\03.png)

**真正配置 Less**

```js
const lessRegex = /\.less$/;
const lessModuleRegex = /\.module\.less$/;
```



```js
{
  test: lessRegex,
  exclude: lessModuleRegex,
  use: getStyleLoaders({
    importLoaders: 1,
    modules: true,
    sourceMap: isEnvProduction && shouldUseSourceMap
  },
    "less-loader"
  ),
  sideEffects: true
},
{
  test: lessModuleRegex,
  use: getStyleLoaders({
    importLoaders: 1,
    sourceMap: isEnvProduction && shouldUseSourceMap,
    modules: true,
    getLocalIdent: getCSSModuleLocalIdent
  },
    "less-loader"
  )
},

```

配置好重启启动项目就可以了



## 四、导航菜单

### 4.1 效果展示

​	![logo](images\nav.png)

### 4.2 代码演示

布局组件

```jsx
import React, { Component } from 'react'
import MyMenu from './MyMenu/MyMenu'
export default class Layout extends Component {
    render() {
        return (
            <div>
               {/* 导航区域 */}
                <MyMenu/>
               {/* 路由出口 */}
               {
                   this.props.children
               }
            </div>
        )
    }
}

```

导航组件

```jsx
import React, { Component } from 'react'
import { NavLink } from 'react-router-dom'
import logo from '../../../assets/images/logo.jpg'
import { Menu, Dropdown } from 'antd';
import { DownOutlined } from '@ant-design/icons';
import './style.scss'
// import styles from './style.module.scss'
import api from '../../../api/index'
export default class MyMenu extends Component {
    constructor(){
        super()
        this.state={
            citys:[],//城市列表
        }
    }
     //网络请求
    componentDidMount(){
        api.getCity()
        .then(res=>{
            console.log(res.data);
            console.log(res.data.data);
            this.setState({
                citys:res.data.data
            })
        })
    }
    //函数
    onClick=({key})=>{
        console.log('当前选择的城市id为：',key);
    }

    render() {
        const menu = (
            // 获取菜单点击的key 也就是城市的标识 id    onClick={onClick}
            <Menu onClick={this.onClick}>
                {
                    this.state.citys.map((ele)=>{
                        return <Menu.Item key={ele.id}>
                                <a rel="noopener noreferrer" href="##">
                                    {ele.name}
                                </a>
                            </Menu.Item>
                    })
                }
            </Menu>
        )
        return (
            <div className='menu'>
                <div className='container'>
                    <div className='left'>
                        <img src={logo} width='180' height='72' style={{marginRight:'10px'}} alt="" />
                        {/* 城市切换 */}
                        <Dropdown overlay={menu}>
                            <a className="ant-dropdown-link" onClick={e => e.preventDefault()}>
                                北 京 <DownOutlined />
                            </a>
                        </Dropdown>

                    </div>
                    <div className='right'>
                        <NavLink exact to='/'>首页</NavLink>
                        <NavLink to='/house'>法拍房源</NavLink>
                        <NavLink to='/news'>法拍资讯</NavLink>
                        <NavLink to='/aa'>成功案例</NavLink>
                        <NavLink to='/bb'>关于我们</NavLink>
                        <span>登录/注册</span>
                    </div>
                </div>
            </div>
        )
    }
   
}

```



## 五、首页搜索区域

### 5.1 效果图

​	![logo](images\search.png)	

### 5.2 代码演示

```jsx
import React, { Component } from 'react'
import { Input } from 'antd';
import api from '../../api/index'
import styles from './style.module.less'
const { Search } = Input;
export default class Home extends Component {
    constructor() {
        super()
        this.state = {
            houseInfo: {},//房源信息
        }
    }
    //生命周期
    componentDidMount() {
        //房源信息------------------------------------
        api.getHouseInfo()
            .then(res => {
                console.log('房源信息---', res.data);
                this.setState({
                    houseInfo: res.data.data
                })
            })
        //捡漏房源
        api.getIgnore({ pageNo: 0, pageSize: 9, authorId: "129465", sortId: 1, city: 110100 })
            .then(res => {
                console.log('捡漏房源', res.data);
            })
    }
    //函数
    onSearch = (value) => {
        console.log(value);
    }
    render() {
        return (
            <div>
                {/* 1. 搜索区域 */}
                <div className={styles.main}>
                    <div className={styles['main-content']}>
                        <ul className={styles['main-info']}>
                            <li>
                                今日
                                <div className={styles.info}> 法拍快讯</div>
                            </li>
                            <li>
                                {this.state.houseInfo.addCount} 套
                                <div className={styles.info}>今日上拍</div>
                            </li>
                            <li>
                                {this.state.houseInfo.overCount} 套
                                <div className={styles.info}>今日成交</div>
                            </li>
                            <li>
                                {this.state.houseInfo.strikeCount} 套
                                <div className={styles.info}>今日流拍</div>
                            </li>
                            <li>
                                {this.state.houseInfo.cancelCount} 套
                                <div className={styles.info}>今日撤拍</div>
                            </li>
                        </ul>
                        {/*搜搜 */}
                        <div className={styles.search}>
                            {/* <Input placeholder="请输入你喜欢的房源" className={styles.input} /> */}
                            <Search
                                placeholder="请输入你喜欢的房源"
                                allowClear
                                enterButton="搜索"
                                size="large"
                                onSearch={this.onSearch}
                            />
                        </div>
                    </div>
                </div>

                {/* 2. 热门房源 */}

                {/* 3. 捡漏 */}


            </div>
        )
    }
}

```

样式

```less
.main{
    height: 600px;
    background: url('../../assets/images/banner3.jpg') no-repeat top center;
    width: 100%;
    overflow: hidden;
    .main-content{
        width: 1200px;
        margin:  0 auto;
        position: relative;
        margin-top: 360px;
        .main-info{
            display: flex;
            padding:0 200px;
            li{
                flex: 1;
                text-align: center;
                color: #fff;
                font-size: 20px;
                font-weight: bold;
                border-right: 1px solid rgb(219, 219, 219);
            }
            .info{
                color: #aaa;
                margin-top: 4px;
                font-size: 18px;
            }
            li:last-child{
                border-right: 0;
            }
        }
    }
    .search {
        padding:0 60px;
    }
}
```

### 5.3 请求接口配置

```js
/**
 * 公共的请求方法
 */
import base from './base'
import axios from 'axios'

const api = {
    /**
     * 切换城市
     */
    getCity() {
        return axios.get(base.host+base.city)
    },
    /**
     * 当前城市的拍房源信息
     */
    getHouseInfo() {
        return axios.get(base.host+base.houseInfo)
    },
    /**
     * 捡漏房源
     * {pageNo: 0, pageSize: 9, authorId: "129465", sortId: 1, city: 110100}
     */
    getIgnore(params){
        return axios.post(base.host+base.ignore,params)
    }
}

export default api
```

