### 小程序

1. 事件绑定：指南 → 小程序框架 → 事件系统

2. 小程序中没有 BOM 也没有 DOM，所有也没有window。全局对象是：wx。

3. vue发请求通过：axios(Ajax和promise的结合体).then

5. 在小程序中要使用数据，必须加插值`{{}}`。

6. 在小程序中使用axios，记得把详情中的增强编译开起来。

7. 底部tab栏：框架 -》全局配置 -》tabBar(点击) -》到全局app.json中配置。

8. 在app.json 中，页面路径不要写绝对路径，图片路径可以写绝对路径。

9. page + table键：快速生成微信js框架。

10. event 中的 touches 数组用于记录当前屏幕上所有的手指。

    changedTouches 数组用于记录当前屏幕上所有正在变化的手指。

11. touchstart 只能监听用户按下，不能确定按了多久。无法区分点击 和 长按。

12. 点击 和 长按 需要用到 tap 和 longtap 这两个事件。

#### 如果是导入成品项目，一定要将APPID修改为自己的

#### 下拉刷新

在app.json中，修改window中的：`"enablePullDownRefresh":true`



#### 点击登录按钮要做什么

1. 收集数据
2. 前台表单验证(如：elementui中的validate验证)。目的是为了减少无用请求的发送，降低服务器压力。
3. 整理数据
4. 发送请求
5. 成功做什么
   - 弹窗提示用户登录成功
   - 将用户信息保存到localStorage中
   - 跳转到个人中心页面，并从localStorage中获取用户信息展示到页面上
6. 失败做什么
   - 弹窗提示用户账号或者密码出错



#### 小程序中的数据缓存

比原生浏览器中的要多很多。

要注意的点：

1. 存值：原生叫作key和value，微信的叫key和data

2. 原生只能存储字符串，微信可以存储字符串或者对象，要看对应的api。

3. wx.setStorageSync(string key, any data); 和 wx.setStorage(object, object)

   ```js
   wx.setStorageSync('key', 'value')
   ```

   ```js
   const obj = {
     name: 'zs',
     age: 18
   }
   wx.setStorage({
     key:"key",
     data: obj
   })
   
   // 上面的对象存储也可以改为字符串
   wx.setStorage({
     key:"key",
     data: JSON.stringify(obj)
   })
   ```

   

4. [官方API地址](https://developers.weixin.qq.com/miniprogram/dev/api/storage/wx.setStorageSync.html)



#### 小程序传参

**小程序只能传递query参数**，并且在onLoad生命周期的形参中会生成query对象，可以拿到传递的数据。

小程序url有长度限制。所以在onLoad中如果数据比较大，多余的数据收不到。

```js
onLoad: function (options) {
    console.log(options);
}
```

可以通过自定义属性的方式，在点击歌曲的时候传递一个id过来，然后在接收参数的页面带上id重新发送请求，获取到当前歌曲的信息。



#### 动态设置当前页面的导航栏标题

```js
wx.setNavigationBarTitle({
    title: '标题内容'
})
```



#### 小程序分包

位置：微信官方文档 =》指南 =》基础能力 =》[分包加载](https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html)

目前小程序分包大小有以下限制：

- 整个小程序所有分包大小不超过 20M
- 单个分包/主包大小不能超过 2M



分包分为普通分包和独立分包

- 普通分包的目的：仅仅是为了把多个组件拆分成分包，仅此而已。
- 独立分包的目的：不影响整体上线的项目，如果有活动之类的，可以单独再做一个页面加到整体项目上。如：京东双12的时候，就可以在小程序上多加一个页面。













































