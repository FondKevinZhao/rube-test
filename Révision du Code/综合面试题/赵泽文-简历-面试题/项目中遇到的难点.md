## 项目中遇到的难点

### 后台管理系统

1. 在删除属性值的时候：给删除按钮做气泡框，用 el-popconfirm 组件绑定 onConfirm 事件(用于响应用户的确认删除操作)的时候(用的官网的confirm事件)一直没有效果，一直以为是我代码写得有问题，检查了很久没有发现。

   **解决：**后面在网上查资料，才发现需要把 confirm 改成 onConfirm 事件才行。

2. 给一条数据添加一个属性值：如，手机，添加属性名为：内存，属性值为128G，再添加128G的时候不能够添加的情况。

   当时使用到方法是some()

   遇到的问题就是：第一次添加的时候就添加不进去。原因是，两个下标一样了，也就是把第一次添加的值拿去这个数组中去比较了，把自身应该排除在外。

   ```js
   // 监视用户输入框失去焦点事件,切回span标签进行展示效果
   const toLook = (row: AttrValueModel, index: number) => {
       // 如果没有数据,或者都是空格,就删除该条记录
       if (!row.valueName.trim()) {
           attrForm.attrValueList.splice(index, 1);
           ElMessage.info("属性值不能为空!")
           return;
       }
   
       // 如果有数据,但是数据已经重复,也删除该条记录
       // 用于当前输入的数据在row.valueName中存储,所有的属性值都在attrForm.attrValueList数组中
       // attrForm.attrValueList是数组,内部存储是对象
       // row.valueName是字符串
       // 其实最终要的效果,是取出内部对象的valueName和row.valueName进行对比,判断是否出现过
       // filter,find,every,some都可以,但是我们需要的返回值是布尔值类型,所以排除filter,find
       // 又因为只找一个就够,所以some即可
       const result = attrForm.attrValueList.some((item, i) => {
           // 1.先判断是不是同一个人,如果是同一个人就不执行后续代码
           // 2.如果不是同一个人才判断名字
           return i !== index && item.valueName === row.valueName;
       })
   
       // 如果result值为true代表该属性已存在,需要删除
       if (result) {
           attrForm.attrValueList.splice(index, 1);
           ElMessage.info("属性值不能重复!")
           return;
       }
   
       row.isEdit = false;
   }
   ```

   

   

### 商城

报错的内容：

<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e97fa368a3e542ccb41539a6f0546aa8~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp">

1. vue-router 升级到 3.1.x 后，**重复点击导航时，控制台出现报错 ，虽然不影响功能使用，但也不能视而不见。**

   报错原因：vue router ≥ v3.1 后 ，回调形式改成 promise api 了，返回的是 promise，如果没有捕获到错误，控制台始终会出现如上图的警告。

   解决方法：

   1. 降低版本`npm i vue-router@3.0 -S`

   2. 在 router 文件夹增加下列代码

      ```js
      const routerPush = Router.prototype.push
      Router.prototype.push = function push(location) {
        return routerPush.call(this, location).catch((error) => error)
      }
      ```

      

   3. 捕获异常：

      ```js
      // 捕获router.push异常
      this.$router.push(route).catch((err) => {
        console.log('输出报错', err)
      })
      ```

      

   4. 补齐 router 第三个参数

      ```js
      // 补齐router.push()的第三个参数
      this.$router.push(
        route,
        () => {},
        (e) => {
          console.log('输出报错', e)
        }
      )
      ```

      [博客链接](https://juejin.cn/post/6878216531730235399)

   

## 小程序

### 小程序搜索框实现

1. 判断是否为空，如果为空则提示用户，输入内容不能为空。

2. 发送请求，获取数据。

3. 判断是否为有效关键词，如果搜索的内容中没有商品，则版心内容提示用户，未搜到合适的商品。

   [小程序实现搜索框功能](https://www.jb51.net/article/165226.htm)



### 实现带搜索记录的搜索框

1. 关键API: `wx.getStorageSync('searchData') || []`, //调用 API 从本地缓存中获取数据

[博客链接](https://zhuanlan.zhihu.com/p/28974294)



### 小程序优化

1. 剔除无用的代码逻辑。
2. 组件和逻辑的复用，较少重复代码。
3. 分包加载，启动时先下载主包，启用分包减少下载时间 。
4. 分屏渲染： 先渲染可视区域内容，然后再渲染非可视区域内容或者滚动到视野范围内再渲染。

### 小程序微信支付流程

1、小程序注册，要以公司的以身份去注册一个小程序，才有微信支付权限。
2、绑定商户号。
3、在小程序填写合法域名。
完成以上工作之后，你需要拿到四个东西：
小程序 **appid** 和 **小程序秘钥**， 这两个用于获取用户 openid， 商户号 id 和 商户号秘钥 ，当然**支付接口**也是必须的；这些都可以登录微信公众平台去申请或者获取到。

> 小程序的秘钥在 appid 的下面，可以直接取到。

还可以这么说：

上线：每个微信小程序都有一个 appid，就像身份证。在开发调试好后，文件大于 2M 就要进行分包，把首页放在第一个展示。微信开发者工具右上角有发布，点击发布后会有微信官方审核，一般是2到 5 天以内审核通过，通过就上线了。

### [以前收藏的小程序面试题](https://juejin.cn/post/6844903966342381581)

### 小程序购物车功能实现

需求：

1. 显示商品基本信息：图片、描述、数量、单价、全选、删除、结算。
2. 点击复选框进行 toggle 操作。当前选中，则变成未选中，当前未选中，则变成选中。
3. 商品数量的加减操作。
   - 增减数量：点击 +号，number +1，点击-号，如果 num>1，则减1，否则=1。
   - 删除商品：点击删除按钮则从购物车列表中删除当前元素，删除之后，如果购物车为空，改变购物车为控表示 hasList 为 false。
4. 根据选中商品进行价格汇总。
5. 全选/全不选。
6. 点击结算。

程序实现步骤：

[小程序购物车实现](https://blog.csdn.net/flight_diary/article/details/107002118)

### 微信小程序轮播图实现

1. 轮播图的外层容器是 swiper。
2. 每个轮播项是 swiper-item。
3. 给 swiper 加 autoplay 可以实现自动轮播。autoplay 是个布尔值。



### 官网的方式使用 view 或 text 等组件进行开发：相当于HTML中的 div 和 span。
